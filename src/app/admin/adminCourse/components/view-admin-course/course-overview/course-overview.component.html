<div class="course-overview-wrapper" *ngIf="courseData$ | async as data;">
    <div class="row tile-row" style="margin-top: 20px;">
        <div class="col-xl-6 col-lg-12 col-tile-outer">
            <course-data [data]="data.courseInfo" class=""></course-data>
        </div>
        <div class="col-xl-6 col-lg-12 col-tile-outer" *ngIf="data.userStatus.length > 0">
            <div class="col-tile">
                <div class="col-header">{{'course.State' | translate}}:</div>
                <div class="col-text" style="padding-top: 10px;">
                    <div>
                        <div class="chart-container" style="cursor: pointer;"
                            matTooltip="{{'course.OpenMemberView' | translate}}"
                            (click)="openPartList()">
                            <div>
                                <div style="display: block">
                                    <canvas baseChart [data]="courseChartData"
                                        [labels]="courseChartLabels" [chartType]="'doughnut'"
                                        [colors]="courseChartColors">
                                    </canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row tile-row" style="margin-top: 20px;">
        <div class="col-xl-6 col-lg-12 col-tile-outer">
            <div class="col-tile">
                <div class="col-header">{{'course.AssignedToDep' | translate}}</div>
                <div class="col-text">
                    <div style="width: 100%;overflow: auto;">
                        <table mat-table [dataSource]="departmentStatusTable"
                            class="mat-elevation-z8" #depSort="matSort" matSort matSortActive="name"
                            matSortDirection="asc">
                            <ng-container matColumnDef="status">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header></th>
                                <td mat-cell *matCellDef="let dep" class="cell-status-wrapper"
                                    [style.width]="userInfo.UserType > 2 ? '25px' : '51px'">
                                    <div class="status-div"
                                        [style.width]="userInfo.UserType > 2 ? '25px' : '51px'">
                                        <div class="status-div-inner-left"
                                            [ngClass]="{'status-done': dep.departmentCourseStatus==1, 'status-current': dep.departmentCourseStatus==0, 'status-overdue': dep.departmentCourseStatus==-1}">
                                            <i class="fa fa-book fa-lg center-icon"
                                                aria-hidden="true"
                                                matTooltip="{{'course.DepCourseState' | translate}}"></i>
                                        </div>
                                        <div *ngIf="2 >= userInfo.UserType"
                                            class="status-div-inner-right"
                                            [ngClass]="{'status-done': dep.status==1, 'status-current': dep.status==0, 'status-overdue': dep.status==-1}">
                                            <i class="fa fa-user fa-lg center-icon"
                                                matTooltip="{{'course.StateDep' | translate}}"
                                                aria-hidden="true"></i>
                                        </div>
                                    </div>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="name">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                    style="padding-left: 10px;">
                                    {{'course.Department' | translate}}
                                </th>
                                <td style="padding-left: 10px;" mat-cell *matCellDef="let dep">
                                    <div *ngIf="userInfo.isAdmin"
                                        routerLink="../../../../department/{{dep.departmentId}}"
                                        [skipLocationChange]="false"
                                        [matTooltip]="'openVar' | translate: {var: dep.departmentName}"
                                        style="cursor: pointer;">
                                        <b>{{dep.departmentName}}</b>
                                    </div>
                                    <div *ngIf="!userInfo.isAdmin">
                                        <b>{{dep.departmentName}}</b>
                                    </div>
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="departmentDisplayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: departmentDisplayedColumns;"
                                class="group-row">
                            </tr>
                        </table>
                    </div>
                    <mat-paginator #depPaginator [pageSizeOptions]="[5, 10, 20, 50, 100]"
                        [pageSize]="10" showFirstLastButtons>
                    </mat-paginator>
                </div>
            </div>
        </div>
        <div class="col-xl-6 col-lg-12 col-tile-outer">
            <div class="col-tile">
                <div class="col-header">{{'course.AssignedToGroup' | translate}}</div>
                <div class="col-text">
                    <div style="width: 100%;overflow: auto;">
                        <table mat-table [dataSource]="groupStatusTable" 
                            class="mat-elevation-z8" #groupSort="matSort" matSort matSortActive="name"
                            matSortDirection="asc">
                            asd
                            <ng-container matColumnDef="status">
                                asd
                                <th mat-header-cell *matHeaderCellDef mat-sort-header></th>
                                <td mat-cell *matCellDef="let group" class="cell-status-wrapper"
                                    [style.width]="userInfo.UserType > 2 ? '25px' : '51px'">
                                    <div class="status-div"
                                        [style.width]="userInfo.UserType > 2 ? '25px' : '51px'">
                                        <div class="status-div-inner-left"
                                            [ngClass]="{'status-done': group.groupCourseStatus==1, 'status-current': group.groupCourseStatus==0, 'status-overdue': group.groupCourseStatus==-1}">
                                            <i class="fa fa-book fa-lg center-icon"
                                                aria-hidden="true"
                                                matTooltip="{{'course.GroupCourseState' | translate}}"></i>
                                        </div>
                                        <div *ngIf="2 >= userInfo.UserType"
                                            class="status-div-inner-right"
                                            [ngClass]="{'status-done': group.status==1, 'status-current': group.status==0, 'status-overdue': group.status==-1}">
                                            <i class="fa fa-user fa-lg center-icon"
                                                matTooltip="{{'course.StateGroup' | translate}}"
                                                aria-hidden="true"></i>
                                        </div>
                                    </div>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="name">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                    style="padding-left: 10px;">
                                    {{'course.Group' | translate}}
                                </th>
                                <td style="padding-left: 10px;" mat-cell *matCellDef="let group">
                                    <div *ngIf="userInfo.isAdmin"
                                        routerLink="../../../../groups/{{group.groupId}}"
                                        [skipLocationChange]="false"
                                        [matTooltip]="'openVar' | translate: {var: group.name}"
                                        style="cursor: pointer;">
                                        <b>{{group.name}}</b>
                                    </div>
                                    <div *ngIf="!userInfo.isAdmin">
                                        <b>{{group.name}}</b>
                                    </div>
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="groupDisplayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: groupDisplayedColumns;"
                                class="group-row">
                            </tr>
                        </table>
                    </div>
                    <mat-paginator #groupPaginator [pageSizeOptions]="[5, 10, 20, 50, 100]"
                        [pageSize]="10" showFirstLastButtons>
                    </mat-paginator>
                </div>
            </div> 
        </div>
    </div>
</div>